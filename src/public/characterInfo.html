<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>캐릭터 정보</title>
    <style>
      body {
        margin: 0;
        font-family: "Arial", sans-serif;
        background-color: #1a1a1a;
        color: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
      }

      nav {
        background-color: rgba(0, 0, 0, 0.7);
        padding: 10px;
        width: 100%;
        position: fixed;
        top: 0;
        z-index: 10;
      }

      nav ul {
        list-style-type: none;
        padding: 0;
      }

      nav ul li {
        display: inline;
        margin-right: 20px;
      }

      nav ul li a {
        color: white;
        text-decoration: none;
      }

      .character-info {
        background-color: rgba(255, 87, 51, 0.8);
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        margin-top: 60px; /* 네비게이션 바 아래 여백 */
      }

      .character-info img {
        width: 200px;
        height: auto;
        border-radius: 10px;
        margin-bottom: 15px;
      }

      .inventory,
      .equipment {
        margin-top: 20px;
        text-align: left;
      }

      .inventory h4,
      .equipment h4 {
        margin-bottom: 10px;
      }

      .inventory ul,
      .equipment ul {
        list-style-type: none;
        padding: 0;
      }

      .inventory li,
      .equipment li {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 5px;
        margin: 5px 0;
        border-radius: 5px;
        cursor: pointer;
      }

      .inventory li:hover,
      .equipment li:hover {
        background-color: rgba(255, 255, 255, 0.2);
      }

      .slots {
        display: flex;
        justify-content: center;
        margin-top: 20px;
      }

      .slot {
        width: 60px;
        height: 60px;
        border: 2px dashed #ff5733;
        border-radius: 5px;
        margin: 5px;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        background-color: rgba(255, 255, 255, 0.1);
      }

      .slot img {
        width: 100%;
        height: 100%;
        border-radius: 5px;
        display: none; /* 기본적으로 숨김 */
      }

      .slot.active img {
        display: block; /* 장착된 아이템이 있을 경우 표시 */
      }

      .slot:hover {
        background-color: rgba(255, 255, 255, 0.2);
      }

      .remove-button {
        position: absolute;
        top: 0;
        right: 0;
        background-color: rgba(255, 0, 0, 0.8);
        border: none;
        color: white;
        border-radius: 5px;
        padding: 3px 5px;
        cursor: pointer;
        font-size: 12px;
        display: none; /* 기본적으로 숨김 */
      }

      .slot:hover .remove-button {
        display: block; /* 슬롯 호버 시 제거 버튼 표시 */
      }
    </style>
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="index.html">메인 페이지</a></li>
        <li><a href="login.html">로그인</a></li>
        <li><a href="character.html">캐릭터</a></li>
        <li><a href="item.html">아이템</a></li>
        <li><a href="inventory.html">인벤토리</a></li>
      </ul>
    </nav>

    <div class="character-info" id="characterInfo">
      <!-- 캐릭터 정보가 여기에 표시됩니다. -->
    </div>

    <script>
      const params = new URLSearchParams(window.location.search);
      const name = params.get("name");
      const image = params.get("image");

      // 예시 데이터: 이 부분은 실제 데이터로 교체해야 함
      const characterData = {
        name: name,
        image: image,
        attack: 50,
        health: 100,
        inventory: ["검", "방패", "포션"],
        equipment: {
          weapon: "",
          shield: "",
        },
      };

      const characterInfo = document.getElementById("characterInfo");

      // 캐릭터 정보 표시
      characterInfo.innerHTML = `
            <h1>${characterData.name}</h1>
            <img src="${characterData.image}" alt="${characterData.name}">
            <p>공격력: ${characterData.attack}</p>
            <p>체력: ${characterData.health}</p>
            <div class="equipment">
                <h4>장비:</h4>
                <div class="slots">
                    <div class="slot" id="weaponSlot" onclick="toggleEquip('weapon')">
                        <span>무기</span>
                        <img src="" id="weaponImage" alt="무기">
                        <button class="remove-button" onclick="unequipItem('weapon', event)">제거</button>
                    </div>
                    <div class="slot" id="shieldSlot" onclick="toggleEquip('shield')">
                        <span>방패</span>
                        <img src="" id="shieldImage" alt="방패">
                        <button class="remove-button" onclick="unequipItem('shield', event)">제거</button>
                    </div>
                </div>
            </div>
            <div class="inventory">
                <h4>인벤토리 아이템:</h4>
                <ul>
                    ${characterData.inventory
                      .map(
                        (item) =>
                          `<li onclick="equipItem('${item}')">${item}</li>`
                      )
                      .join("")}
                </ul>
            </div>
        `;

      function equipItem(item) {
        if (item === "검") {
          characterData.equipment.weapon = item;
          document.getElementById("weaponImage").src =
            "path/to/your/weapon-image.png"; // 이미지 경로 설정
          document.getElementById("weaponImage").alt = item;
          document.getElementById("weaponSlot").classList.add("active");
        } else if (item === "방패") {
          characterData.equipment.shield = item;
          document.getElementById("shieldImage").src =
            "path/to/your/shield-image.png"; // 이미지 경로 설정
          document.getElementById("shieldImage").alt = item;
          document.getElementById("shieldSlot").classList.add("active");
        } else {
          alert("장착할 수 없는 아이템입니다.");
        }
      }

      function unequipItem(slot, event) {
        event.stopPropagation(); // 이벤트 전파 방지
        if (slot === "weapon") {
          characterData.equipment.weapon = "";
          document.getElementById("weaponImage").src = "";
          document.getElementById("weaponSlot").classList.remove("active");
        } else if (slot === "shield") {
          characterData.equipment.shield = "";
          document.getElementById("shieldImage").src = "";
          document.getElementById("shieldSlot").classList.remove("active");
        }
      }

      function toggleEquip(slot) {
        if (slot === "weapon") {
          if (characterData.equipment.weapon) {
            unequipItem("weapon", event);
          } else {
            alert("무기를 장착하세요.");
          }
        } else if (slot === "shield") {
          if (characterData.equipment.shield) {
            unequipItem("shield", event);
          } else {
            alert("방패를 장착하세요.");
          }
        }
      }
    </script>
  </body>
</html>
